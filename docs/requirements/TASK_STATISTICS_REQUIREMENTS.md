# 产品需求：统计功能 (REQ-TM-S)

本文档详细描述了番茄计时器应用中“统计”功能的用户故事、验收条件和用户故事地图。

## 1. 核心用户价值 (Epic)

**作为一名注重效率的用户**，
**我想要** 查看我的工作和专注度统计数据，
**以便于** 了解我的工作模式、跟踪我的进步、并保持持续的动力。

---

## 2. 用户故事地图 (User Story Map)

```
+---------------------------------------------------------------------------------------------------------------------------------+
|                                                     核心用户价值: 追踪效率，保持动力                                                    |
+---------------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                                 |
|      用户活动 (Activities)         |         获取概览 (Dashboard)         |        分析每日表现 (Daily)        |       分析长期趋势 (Trends)        |        获得激励 (Motivation)         |
|                                                                                                                                 |
+---------------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                                 |
| 用户任务 (User Stories / Backbone) | REQ-TM-S01: 查看今日关键指标         | REQ-TM-S03: 查看每日专注时长分布   | REQ-TM-S05: 查看周/月度数据摘要    | REQ-TM-S07: 查看专注日历热图         |
|                                  | REQ-TM-S02: 查看本周整体表现         | REQ-TM-S04: 查看每日完成的任务列表 | REQ-TM-S06: 比较不同周期的表现     | REQ-TM-S08: 查看连续专注天数 (Streak)|
|                                                                                                                                 |
+---------------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                                 |
|         **发布计划 (Release Slices)**                                                                                             |
|                                                                                                                                 |
| MVP (版本 1)                       | ✅ REQ-TM-S01                       | ✅ REQ-TM-S03                      | ✅ REQ-TM-S05 (周视图)             |                                      |
|                                  | ✅ REQ-TM-S02                       | ✅ REQ-TM-S04                      |                                  |                                      |
|----------------------------------|------------------------------------|------------------------------------|------------------------------------|--------------------------------------|
| 版本 2                           |                                    |                                    | ✅ REQ-TM-S06                      | ✅ REQ-TM-S07                        |
|                                  |                                    |                                    | ✅ REQ-TM-S05 (月视图)             | ✅ REQ-TM-S08                        |
+---------------------------------------------------------------------------------------------------------------------------------+
```

---

## 3. 用户故事及验收条件 (User Stories and Acceptance Criteria)

### REQ-TM-S01: 查看今日关键指标

- **用户故事**: 作为**学生Alex**，我希望能快速看到今天完成了多少个番茄钟和任务，这会给我巨大的即时满足感和继续学习的动力。
- **验收条件 (AC)**:
  - **AC-S01.1**: 统计页面必须显示“今日总专注时长”。
  - **AC-S01.2**: 统计页面必须显示“今日完成的番茄钟数量”。
  - **AC-S01.3**: 统计页面必须显示“今日完成的任务数量”。
  - **AC-S01.4**: 如果今日没有任何活动，指标应显示为0或友好的提示信息（如“今天还没有开始专注哦”）。

### REQ-TM-S02: 查看本周整体表现

- **用户故事**: 作为**市场经理Sarah**，我希望看到本周（最近7天）的整体表现图表，以便快速评估我本周的工作投入节奏，并为周报提供数据支持。
- **验收条件 (AC)**:
  - **AC-S02.1**: 必须展示一个包含最近7天的条形图，显示每天的总专注时长。
  - **AC-S02.2**: 图表应清晰标注日期（如 "周一", "7/22"）。
  - **AC-S02.3**: 鼠标悬停在条形图的某个条上时，应显示当天的具体专注时长。
  - **AC-S02.4**: 必须显示“本周总专注时长”的汇总数据。

### REQ-TM-S03: 查看每日专注时长分布

- **用户故事**: 作为**市场经理Sarah**，我的工作时间经常被会议打断，我想看到我的专注时间在一天中的分布情况，以便找出不被干扰的“黄金时间”，并加以保护。
- **验收条件 (AC)**:
  - **AC-S03.1**: 必须提供一个按小时（0-23点）划分的视图（如条形图或热力图），展示每个小时内的专注分钟数。
  - **AC-S03.2**: 必须有一个日期选择器，允许我查看过去任何一天的专注分布。
  - **AC-S03.3**: 默认视图应为“今天”。

### REQ-TM-S04: 查看每日完成的任务列表

- **用户故事**: 作为**市场经理Sarah**，我需要将我的时间投入与具体的工作产出关联起来。我想看到今天具体在哪些任务上投入了番茄钟，以便分析我的精力分配是否合理。
- **验收条件 (AC)**:
  - **AC-S04.1**: 必须展示一个列表，包含今天所有进行过专注的任务。
  - **AC-S04.2**: 列表中每个任务项都需要显示任务标题和其消耗的番茄钟数量。
  - **AC-S04.3**: 列表应按消耗的番茄钟数量降序排列。

### REQ-TM-S05: 查看周/月度数据摘要

- **用户故事**: 作为**学生Alex**，我希望能回顾过去几周或几个月的学习投入，以便在期末时对自己的长期努力有一个宏观的了解和评估。
- **验收条件 (AC)**:
  - **AC-S05.1**: 用户可以选择“周视图”或“月视图”。
  - **AC-S05.2**: 在周视图中，显示当前周的每日平均专注时长和总番茄数。
  - **AC-S05.3**: 在月视图中，显示当前月的每日平均专注时长和总番茄数。
  - **AC-S05.4**: 必须提供导航按钮，允许用户切换到上一周/月或下一周/月。

### REQ-TM-S06: 比较不同周期的表现

- **用户故事**: 作为**市场经理Sarah**，我希望可以将本周的数据与上周进行比较，这能帮助我了解自己的工作效率是在提升还是在下降，并及时调整。
- **验收条件 (AC)**:
  - **AC-S06.1**: 在周/月视图中，必须显示与上一个周期相比，总专注时长的百分比变化。
  - **AC-S06.2**: 使用清晰的视觉元素（如绿色箭头表示提升，红色箭头表示下降）来表示变化趋势。

### REQ-TM-S07: 查看专注日历热图

- **用户故事**: 作为**学生Alex**，我希望看到一个像GitHub贡献图一样的日历热图，这让我感觉像在玩一个“养成游戏”，能直观地看到自己坚持学习的每一个“脚印”，非常有激励作用。
- **验收条件 (AC)**:
  - **AC-S07.1**: 必须展示一个覆盖过去一年的日历网格。
  - **AC-S07.2**: 每个格子代表一天，颜色的深浅代表当天专注时长的多少。
  - **AC-S07.3**: 鼠标悬停在某个格子上时，应显示具体的日期和专注时长。

### REQ-TM-S08: 查看连续专注天数 (Streak)

- **用户故事**: 作为**学生Alex**，我希望系统能跟踪我连续专注的天数。看到这个数字不断增长，会给我强烈的游戏化激励，让我为了不中断记录而坚持每天学习。
- **验收条件 (AC)**:
  - **AC-S08.1**: 在统计页面的显著位置显示“当前连续专注天数”。
  - **AC-S08.2**: “专注日”定义为当天至少完成一个完整的番茄钟。
  - **AC-S08.3**: 如果有一天未满足“专注日”的条件，连续天数应在第二天重置为0。
  - **AC-S08.4**: (可选) 显示“历史最长连续天数”以作激励。
